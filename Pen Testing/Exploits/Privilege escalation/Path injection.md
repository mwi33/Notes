# Path Injection
## Permissions background
Aside from the read, write and execute permissions for user, group and other, the 'setuid' and 'setgid' can be set.  There are special permissions that pertian only to executable files.

These are set as either a lower-case or upper-case 's'.  A lower-case 's' means both the 'execute' and 'setuid' flags are set.  An upper-case 'S' would mean the 'setuid' bit is set, but the 'execute' flag is missing.
### What is SETUID, SETGID and the Sticky Bit
These are special permissions which permit the execution of applications with privileges of either the 'user' or 'group' owner.

This is especially useful when a low privileged user needs execute an application that requires elevated privileges.
#### Special privileges (setuid and setgid)
A lower-case 's' in the list of permissions for file or applications indicates that the SETUID bit is set.  When the file or application is run, it is executed with the privileges of the owner of the file.  For example if we have an application that can only be executed by 'root' and non-root user cannot execute the application as they do not have the required permissions.  If the SETUID bit is set, that when the application is run, it is executed with root level permissions.

The text book example of this is the 'passwd' application which is used to change a users password.  Obviously, this will require a change to the 'shadows' file, which requires root privileges.  If the SETUID bit is set, then when a non-root user updates thier password it is done with special privileges and changing the password is permitted.
#### Sticky Bit
#### Commands
These are the useful commands to manipulate special permissions.
~~~ bash

# Change ownership SETUID for a copy of the 'id' command

sudo chown root:kali /usr/bin/idcopy

~~~
### Approach (test)
1.  Copy an executable, in this case the 'id' application.

~~~ bash

# This command creates a copy of the 'id' application in the same directory 'idcopy'

sudo cp /etc/bin/id /ect/bin/idcopy

ls -l /etc/bin/idcopy

# user = root
# group = group

# user and group are 'root'
# uid=1000(kali) gid=1000(kali) groups=1000(kali)

~~~

2.  Change the group owner of the application to the current user.

~~~ bash

sudo chown root:kali /usr/bin/idcopy

ls -l /etc/bin/idcopy

# user = root
# group = group

# user and group are 'root'
# uid=1000(kali) gid=1000(kali) euid=0(root) groups=1000(kali)

# we now have effective user id as 0 (root)

~~~

3.  Change the group id

~~~ bash
sudo chmod u+s /usr/bin/idcopy2

idcopy2 -g

# dispalys the group owner

0

# root

~~~
## What is 'effective id'